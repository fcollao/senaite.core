<?xml version="1.0"?>
<object name="BikaSetup"
        meta_type="Factory-based Type Information with dynamic views"
        xmlns:i18n="http://xml.zope.org/namespaces/i18n"
        i18n:domain="plone"
        purge="True">
 <property name="title" i18n:translate="">Bika Setup</property>
 <property name="description"></property>
 <property name="content_icon">++resource++bika.lims.images/bikasetup.png</property>
 <property name="content_meta_type">BikaSetup</property>
 <property name="product">bika.lims</property>
 <property name="factory">addBikaSetup</property>
 <property name="add_view_expr"></property>
 <property name="link_target"></property>
 <property name="global_allow">False</property>
 <property name="filter_content_types">True</property>
 <property name="allowed_content_types">
 </property>
 <property name="allow_discussion">False</property>
 <property name="default_view_fallback">False</property>

 <alias from="(Default)" to="base_edit"/>
 <alias from="view" to="base_edit"/>
 <alias from="edit" to="base_edit"/>

 <action title="View"
         action_id="view"
         category="object"
         condition_expr=""
         icon_expr=""
         link_target=""
         url_expr="string:${object_url}/base_edit"
         i18n:attributes="title"
         i18n:domain="plone"
         visible="False">
  <!--
  This type needs the permission "View" granted for "Authenticated" role.
  Otherwise, Client users and others will not be able to reach setup's
  children (e.g. Sample Types, Profiles, etc.). Nevertheless, we don't want
  users other than lab personnel to access to the plain view of this folder,
  cause it displays high-level settings and other sensible information, such as
  "Password lifetime", "Default turn around time for analyses", etc.

  Note Authenticated users will still be able to get information from those
  fields by other means (e.g. JSON.API), but at least, they won't be able to
  reach the plain view

  TODO: Security: Move all Schema's fields from Setup to a new type
  -->
  <permission value="senaite.core: View Setup"/>
 </action>

 <action title="Edit"
         action_id="edit"
         category="object"
         condition_expr=""
         icon_expr=""
         link_target=""
         url_expr="string:${object_url}/base_edit"
         i18n:attributes="title"
         i18n:domain="plone"
         visible="True">
  <permission value="Modify portal content"/>
 </action>

</object>
